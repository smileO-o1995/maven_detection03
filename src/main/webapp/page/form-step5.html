<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>首页二</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../lib/layui-v2.5.4/css/layui.css" media="all">
    <link rel="stylesheet" href="../lib/font-awesome-4.7.0/css/font-awesome.min.css" media="all">
    <link rel="stylesheet" href="../css/public.css" media="all">
    <link rel="stylesheet" href="../lib/lay-module/step-lay/step.css" media="all">
    <style>
        .layui-card {border:1px solid #f2f2f2;border-radius:5px;}
        .icon {margin-right:10px;color:#1aa094;}
        .icon-blue {color:#1e9fff!important;}
        .layuimini-qiuck-module {text-align:center;margin-top: 10px}
        .layuimini-qiuck-module a i {display:inline-block;width:100%;height:60px;line-height:60px;text-align:center;border-radius:2px;font-size:30px;background-color:#F8F8F8;color:#333;transition:all .3s;-webkit-transition:all .3s;}
        .layuimini-qiuck-module a cite {position:relative;top:2px;display:block;color:#666;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:14px;}
        .welcome-module {width:100%;height:210px;}
        .panel {background-color:#fff;border:1px solid transparent;border-radius:3px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.05);box-shadow:0 1px 1px rgba(0,0,0,.05)}
        .panel-body {padding:10px}
        .panel-title {margin-top:0;margin-bottom:0;font-size:12px;color:inherit}
        .label {display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em;margin-top: .3em;}
        .layui-red {color:red}
        .main_btn > p {height:40px;}
        .layui-bg-number {background-color:#F8F8F8;}
        .mytitle {line-height:28px;font-size:14px;padding-left: 150px; padding-top: 10px;}
        .mycontent {line-height:28px;font-size:13px;padding-left: 170px;}
        .mychartStyle {padding-left: 170px;}
    </style>
</head>
<body>
<div class="layuimini-container">
    <div class="layuimini-main">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
                <div class="layui-card">
                    <div class="layui-card-header"><i class="fa fa-line-chart icon">测试步骤</i></div>
                    <div class="layui-card-body" style="padding-top: 40px;">
                        <!--轮播组件carousel 以及步骤条step-->
                        <div class="layui-carousel" id="stepForm" lay-filter="stepForm" style="margin: 0 auto;">
                            <div carousel-item>
                                <!--step1:选择网表-->
                                <div> <!--div中存放的是任意内容，可以是图片-->
                                    <div style="text-align: center;margin-top: 15px;">
                                        <h4>关于选择元件库的说明</h4>
                                        <div id="myupload" class="demo"></div>
                                        <br>
                                        <button class="layui-btn step1Btn" lay-submit lay-filter="formStep">
                                            下一步
                                        </button>
                                    </div>
                                </div>
                                <!--step2:特征提取-->
                                <div>
                                    <form class="layui-form" style="margin: 0 auto;max-width: 460px;padding-top: 40px;">
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">特征选择：</label>
                                            <div class="layui-input-block">
                                                <input type="checkbox" name="prep[CC0]" title="可控性值CC0">
                                                <input type="checkbox" name="prep[CO]" title="可观测性值">
                                                <input type="checkbox" name="prep[CC1]" title="可控性值CC1">
                                                <input type="checkbox" name="prep[some]" title="不可用属性" disabled>
                                            </div>
                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">备注说明：</label>
                                            <div class="layui-input-block">
                                                <textarea placeholder="入款备注" value="" class="layui-textarea"></textarea>
                                            </div>
                                        </div>
                                        <div class="layui-form-item">
                                            <div class="layui-input-block">
                                                <button type="button" class="layui-btn layui-btn-primary pre">上一步</button>
                                                <button class="layui-btn" lay-submit lay-filter="formStep2">
                                                    下一步
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <!--step3:木马检测-->
                                <div>
                                    <form class="layui-form" style="margin: 0 auto;max-width: 460px;padding-top: 40px;">
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">检测方法：</label>
                                            <div class="layui-input-block">
                                                <input type="radio" name="dctMethid" value="means" title="k-means聚类" checked>
                                                <input type="radio" name="dctMethid" value="dbscan" title="DBSCAN">
                                                <!--<input type="radio" name="dctMethid" value="some" title="其他" disabled>-->
                                            </div>
                                        </div>
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">备注说明：</label>
                                            <div class="layui-input-block">
                                                <textarea placeholder="入款备注" value="" class="layui-textarea"></textarea>
                                            </div>
                                        </div>
                                        <div class="layui-form-item">
                                            <div class="layui-input-block">
                                                <button type="button" class="layui-btn layui-btn-primary pre2">上一步</button>
                                                <button class="layui-btn" lay-submit lay-filter="formStep3">
                                                    下一步
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <!--step4:木马定位-->
                                <div>
                                    <div style="text-align: center;margin-top: 90px;">
                                        <i class="layui-icon layui-circle"
                                           style="color: white;font-size:30px;font-weight:bold;background: #52C41A;padding: 20px;line-height: 80px;">&#xe635;</i>
                                    </div>
                                    <div style="text-align: center;margin-top: 50px;">
                                        <button class="layui-btn pre">上一步</button>
                                        <button class="layui-btn layui-btn-primary" lay-submit lay-filter="formStep4">
                                            开始
                                        </button>
                                        <p class="explain"></p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="layui-col-md12 jsMyCard" style="display: none">
                <div class="layui-card">
                    <div class="layui-card-header"><i class="fa fa-line-chart icon">测试数据</i></div>
                    <div class="layui-card-body">
                        <p class="mytitle">测试网表：</p>
                        <p class="mycontent jsMycontent"></p>

                        <div class="mystep2" style="display: none">
                            <hr>
                            <p class="mytitle">网表中的木马节点：</p>
                            <p class="mycontent">n12,n34,等等</p>
                            <hr>
                            <p class="mytitle">特征值分布图：</p>
                            <div class="mychartStyle">
                                <div id="echarts-records" style="width:500px;height:300px;"></div>
                            </div>
                        </div>

                        <div class="myStep3" style="display: none;">
                            <hr>
                            <p class="mytitle">检测结果图：</p>
                            <div class="mychartStyle">
                                <div id="echarts-records2" style="width:500px;height:300px;"></div>
                            </div>
                            <hr>
                            <p class="mytitle">检测到的木马节点：</p>
                            <p class="mycontent">n12,n34,等等</p>
                            <hr>
                            <p class="mytitle">检测效果：</p>
                            <p class="mycontent">木马识别率：xx%</p>
                            <p class="mycontent">木马误报率：xx%</p>
                        </div>
                        <div class="myStep4" style="display: none;">
                            <hr>
                            <p class="mytitle">定位网表元件：</p>
                            <div class="mycontent">
                                <pre class="layui-code" style="width: 500px;">
                                // 初始化插件
                                $("#zyupload").zyUpload({
                                    width: "650px",                 // 宽度
                                    height: "400px",                 // 宽度
                                    itemWidth: "140px",                 // 文件项的宽度
                                    itemHeight: "115px",                 // 文件项的高度
                                    url: "api/upload",  // 上传文件的路径
                                    fileType: ["jpg", "png", "txt", "js", "exe"],// 上传文件的类型
                                    fileSize: 51200000,                // 上传文件的大小
                                    multiple: true,                    // 是否可以多个文件上传
                                    dragDrop: true,                    // 是否可以拖动上传文件
                                    tailor: true,                    // 是否可以裁剪图片
                                    del: true,                    // 是否可以删除文件
                                    finishDel: false,  				  // 是否在上传文件完成后删除预览
                                    /* 外部获得的回调接口 */
                                ......
                            </pre>
                            </div>
                        </div>
                        <div class="mystep5 mycontent" style="display: none;">
                            <hr>
                            <button class="layui-btn next">新的测试</button>
                            <button class="layui-btn layui-btn-primary">保存数据</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<script src="../lib/layui-v2.5.4/layui.js" charset="utf-8"></script>
<script src="../js/lay-config.js?v=1.0.4" charset="utf-8"></script>
<script src="../lib/jquery-3.4.1/jquery-3.4.1.min.js" charset="utf-8"></script>

<script type="text/javascript">
    layui.use([ 'form', 'step', 'echarts', 'upload'], function () {
        var $ = layui.$,
            form = layui.form,
            step = layui.step,
            echarts = layui.echarts,
            upload = layui.upload;

        //创建一个上传组件
        upload.render({
            elem:"#uploadDemo",
            url:"../../java/servlet/uploadFileServlet",
            done:function(res){
                //上传完毕
                $("#uploadInf").append("<p>上传成功</p>");
                $(".jsMyCard").show();
                $(".jsMycontent").append(file.name + "（即网表的名称）");
            },error:function(){
                //请求异常回调
            }
        })

        //步骤条
        step.render({
            elem: '#stepForm',
            filter: 'stepForm',
            width: '100%', //设置容器宽度
            stepWidth: '750px',
            height: '400px',
            stepItems: [{
                title: '选择网表'
            }, {
                title: '特征提取'
            }, {
                title: '木马检测'
            }, {
                title: '木马定位'
            }]
        });

        /**
         * 报表功能
         */
        var echartsRecords = echarts.init(document.getElementById('echarts-records'), 'walden');
        var optionRecords = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data:['邮件营销','联盟广告','视频广告','直接访问','搜索引擎']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['周一','周二','周三','周四','周五','周六','周日']
            },
            yAxis: {
                type: 'value'
            },
            series: [
                {
                    name:'邮件营销',
                    type:'line',
                    data:[120, 132, 101, 134, 90, 230, 210]
                },
                {
                    name:'联盟广告',
                    type:'line',
                    data:[220, 182, 191, 234, 290, 330, 310]
                },
                {
                    name:'视频广告',
                    type:'line',
                    data:[150, 232, 201, 154, 190, 330, 410]
                },
                {
                    name:'直接访问',
                    type:'line',
                    data:[320, 332, 301, 334, 390, 330, 320]
                },
                {
                    name:'搜索引擎',
                    type:'line',
                    data:[820, 932, 901, 934, 1290, 1330, 1320]
                }
            ]
        };
        echartsRecords.setOption(optionRecords);
        var echartsRecords2 = echarts.init(document.getElementById('echarts-records2'), 'walden');
        echartsRecords2.setOption(optionRecords);

        // echarts 窗口缩放自适应
        window.onresize = function(){
            echartsRecords.resize();
        }

        form.on('submit(formStep)', function (data) {
            step.next('#stepForm');
            return false;
        });

        form.on('submit(formStep2)', function (data) {
            $(".mystep2").show();
            step.next('#stepForm');
            return false;
        });
        form.on('submit(formStep3)', function (data) {
            $(".myStep3").show();
            step.next('#stepForm');
            return false;
        });
        form.on('submit(formStep4)', function (data) {
            $(".myStep4").show();
            $(".mystep5").show();
            $(".explain").append("检测完成，下拉查看结果");
        });

        $('.pre').click(function () {
            step.pre('#stepForm');
        });
        $('.pre2').click(function () {
            step.pre('#stepForm');
        });

        $('.next').click(function () {
            step.next('#stepForm');
        });
    });
</script>
</body>
</html>